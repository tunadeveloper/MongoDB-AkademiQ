@using MongoDB_AkademiQ.DTOs.ProductDTOs
@model List<ResultProductDTO>
@{
    ViewData["Title"] = "Arama Sonuçları";
    Layout = "_UserLayout";
}

<main class="flex-grow">
    <section class="max-w-[1440px] mx-auto px-4 md:px-8 xl:px-20 py-16 md:py-24">
        <div class="mb-8">
            <h2 class="text-2xl md:text-3xl font-bold text-text-main dark:text-white mb-4">
                @if (!string.IsNullOrEmpty(ViewBag.SearchTerm))
                {
                    <text>"@ViewBag.SearchTerm" için arama sonuçları</text>
                }
                else
                {
                    <text>Arama</text>
                }
            </h2>
            <p class="text-text-sub">@Model.Count sonuç bulundu</p>
        </div>

        @if (Model.Any())
        {
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                @foreach (var product in Model)
                {
                    <div class="bg-surface-light dark:bg-surface-dark rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow group border border-transparent hover:border-gray-200 dark:hover:border-gray-700">
                        <div class="relative aspect-[4/5] rounded-lg overflow-hidden mb-4 bg-gray-100 dark:bg-gray-800">
                            <div class="w-full h-full bg-cover bg-center group-hover:scale-105 transition-transform duration-500" style='background-image: url("@product.ImageUrl");'>
                            </div>
                            <button class="absolute top-3 right-3 w-8 h-8 bg-white/80 dark:bg-black/50 backdrop-blur rounded-full flex items-center justify-center text-gray-500 hover:text-red-500 transition-colors">
                                <span class="material-symbols-outlined text-[20px]">favorite</span>
                            </button>
                        </div>
                        <div class="space-y-2">
                            <div class="flex justify-between items-start">
                                <h3 class="text-text-main dark:text-white font-bold text-lg leading-tight">@product.Name</h3>
                                <span class="text-primary font-bold">@product.Price.ToString("C")</span>
                            </div>
                            <p class="text-text-sub text-sm">@(product.Description?.Length > 50 ? product.Description.Substring(0, 50) + "..." : product.Description ?? "Açıklama yok")</p>
                            <button class="w-full mt-4 bg-[#e7eef4] dark:bg-gray-700 hover:bg-primary hover:text-white text-text-main dark:text-white py-2 rounded-lg font-bold text-sm transition-colors flex items-center justify-center gap-2">
                                <span class="material-symbols-outlined text-[18px]">shopping_bag</span> Sepete Ekle
                            </button>
                        </div>
                    </div>
                }
            </div>
        }
        else if (!string.IsNullOrEmpty(ViewBag.SearchTerm))
        {
            <div class="text-center py-16">
                <span class="material-symbols-outlined text-6xl text-text-sub mb-4">search_off</span>
                <h3 class="text-xl font-bold text-text-main dark:text-white mb-2">Sonuç bulunamadı</h3>
                <p class="text-text-sub">"@ViewBag.SearchTerm" için hiçbir ürün bulunamadı.</p>
            </div>
        }
        else
        {
            <div class="text-center py-16">
                <span class="material-symbols-outlined text-6xl text-text-sub mb-4">search</span>
                <h3 class="text-xl font-bold text-text-main dark:text-white mb-2">Arama yapın</h3>
                <p class="text-text-sub">Ürün aramak için arama kutusunu kullanın.</p>
            </div>
        }
    </section>
</main>
