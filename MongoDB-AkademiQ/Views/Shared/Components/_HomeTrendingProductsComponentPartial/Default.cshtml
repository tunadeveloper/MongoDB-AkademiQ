@using MongoDB_AkademiQ.DTOs.ProductDTOs
@model List<ResultProductDTO>

<section class="max-w-[1440px] mx-auto px-4 md:px-8 xl:px-20 py-16 md:py-24">
    <div class="flex items-center justify-between mb-8">
        <h2 class="text-2xl md:text-3xl font-bold text-text-main dark:text-white">Trend Ekipmanlar</h2>
        <div class="flex gap-2">
            <button onclick="scrollProducts('left')" class="w-10 h-10 rounded-full border border-gray-200 dark:border-gray-700 flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                <span class="material-symbols-outlined">chevron_left</span>
            </button>
            <button onclick="scrollProducts('right')" class="w-10 h-10 rounded-full border border-gray-200 dark:border-gray-700 flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                <span class="material-symbols-outlined">chevron_right</span>
            </button>
        </div>
    </div>

    <div id="scroll-container" class="flex overflow-x-auto gap-6 pb-8 no-scrollbar snap-x scroll-smooth">
        @foreach (var product in Model)
        {
            <div class="min-w-[280px] md:min-w-[300px] bg-surface-light dark:bg-surface-dark rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow snap-start group border border-transparent hover:border-gray-200 dark:hover:border-gray-700">
                <div class="relative aspect-[4/5] rounded-lg overflow-hidden mb-4 bg-gray-100 dark:bg-gray-800">
                    <div class="w-full h-full bg-cover bg-center group-hover:scale-105 transition-transform duration-500" style='background-image: url("@product.ImageUrl");'>
                    </div>
                    <button class="absolute top-3 right-3 w-8 h-8 bg-white/80 dark:bg-black/50 backdrop-blur rounded-full flex items-center justify-center text-gray-500 hover:text-red-500 transition-colors">
                        <span class="material-symbols-outlined text-[20px]">favorite</span>
                    </button>
                </div>
                <div class="space-y-2">
                    <div class="flex justify-between items-start">
                        <h3 class="text-text-main dark:text-white font-bold text-lg leading-tight">@(product.Name?.Length > 17 ? product.Name.Substring(0, 17) + "..." : product.Name)</h3>
                        <span class="text-primary font-bold">@product.Price.ToString("C")</span>
                    </div>
                    <p class="text-text-sub text-sm">@(product.Description?.Length > 45 ? product.Description.Substring(0, 45) + "..." : product.Description ?? "Açıklama yok")</p>
                    <button class="w-full mt-4 bg-[#e7eef4] dark:bg-gray-700 hover:bg-primary hover:text-white text-text-main dark:text-white py-2 rounded-lg font-bold text-sm transition-colors flex items-center justify-center gap-2">
                        <span class="material-symbols-outlined text-[18px]">shopping_bag</span> Sepete Ekle
                    </button>
                </div>
            </div>
        }
    </div>
</section>

<script>
    function scrollProducts(direction) {
        const container = document.getElementById('scroll-container');
        const scrollAmount = 324;

        if (direction === 'left') {
            container.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
        } else {
            container.scrollBy({ left: scrollAmount, behavior: 'smooth' });
        }
    }
</script>

<style>
    .no-scrollbar::-webkit-scrollbar {
        display: none;
    }

    .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
</style>
