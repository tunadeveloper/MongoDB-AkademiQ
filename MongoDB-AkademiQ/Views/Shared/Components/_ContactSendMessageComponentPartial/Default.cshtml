@using MongoDB_AkademiQ.DTOs.MessageDTOs
@model CreateMessageDTO
<div class="lg:col-span-7 flex flex-col gap-8">
    <div>
        <h2 class="text-slate-900 dark:text-white text-3xl font-bold leading-tight tracking-tight mb-2">Mesaj Gönderin</h2>
        <p class="text-slate-500 dark:text-slate-400">Aşağıdaki formu doldurun, ekibimiz 24 saat içinde size dönüş yapsın.</p>
    </div>
    <div class="bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 md:p-8 shadow-sm">
        <form method="post" asp-controller="Contact" asp-action="SendMessage">
            <div class="flex flex-col gap-6">
                <div class="flex flex-col md:flex-row gap-4">
                    <label class="flex flex-col min-w-40 flex-1">
                        <p class="text-slate-900 dark:text-white text-sm font-semibold leading-normal pb-2">İsim</p>
                        <input class="form-input flex w-full rounded-lg text-slate-900 dark:text-white border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 h-12 px-4 focus:border-primary focus:ring-1 focus:ring-primary placeholder:text-slate-400 text-sm" placeholder="Ahmet" name="Name" required />
                    </label>
                    <label class="flex flex-col min-w-40 flex-1">
                        <p class="text-slate-900 dark:text-white text-sm font-semibold leading-normal pb-2">Soyisim</p>
                        <input class="form-input flex w-full rounded-lg text-slate-900 dark:text-white border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 h-12 px-4 focus:border-primary focus:ring-1 focus:ring-primary placeholder:text-slate-400 text-sm" placeholder="Yılmaz" name="Surname" required />
                    </label>
                </div>
                <div class="flex flex-col md:flex-row gap-4">
                    <label class="flex flex-col min-w-40 flex-1">
                        <p class="text-slate-900 dark:text-white text-sm font-semibold leading-normal pb-2">E-posta Adresiniz</p>
                        <input class="form-input flex w-full rounded-lg text-slate-900 dark:text-white border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 h-12 px-4 focus:border-primary focus:ring-1 focus:ring-primary placeholder:text-slate-400 text-sm" placeholder="ahmet@ornek.com" type="email" name="Email" required />
                    </label>
                    <label class="flex flex-col min-w-40 flex-1">
                        <p class="text-slate-900 dark:text-white text-sm font-semibold leading-normal pb-2">Konu</p>
                        <div class="relative">
                            <select class="form-select flex w-full rounded-lg text-slate-900 dark:text-white border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 h-12 px-4 pr-10 focus:border-primary focus:ring-1 focus:ring-primary text-sm appearance-none" name="Subject" required>
                                <option value="">Konu Seçiniz</option>
                                <option value="Genel Bilgi" @@(Model?.Subject == "Genel Bilgi" ? "selected" : "")>Genel Bilgi</option>
                                <option value="Sipariş Desteği" @@(Model?.Subject == "Sipariş Desteği" ? "selected" : "")>Sipariş Desteği</option>
                                <option value="İade ve Değişim" @@(Model?.Subject == "İade ve Değişim" ? "selected" : "")>İade ve Değişim</option>
                                <option value="Ürün Soruları" @@(Model?.Subject == "Ürün Soruları" ? "selected" : "")>Ürün Soruları</option>
                            </select>
                            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-500">
                                <span class="material-symbols-outlined text-[20px]">expand_more</span>
                            </div>
                        </div>
                    </label>
                </div>
                <label class="flex flex-col w-full">
                    <p class="text-slate-900 dark:text-white text-sm font-semibold leading-normal pb-2">Mesajınız</p>
                    <textarea class="form-textarea flex w-full rounded-lg text-slate-900 dark:text-white border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 p-4 h-32 resize-y focus:border-primary focus:ring-1 focus:ring-primary placeholder:text-slate-400 text-sm" placeholder="Size bugün nasıl yardımcı olabiliriz?" name="Content" required></textarea>
                </label>
                <div class="pt-2">
                    <button class="flex w-full md:w-auto md:min-w-[160px] cursor-pointer items-center justify-center rounded-lg h-12 bg-primary hover:bg-sky-500 text-white gap-2 text-base font-bold leading-normal tracking-[0.015em] transition-colors shadow-sm hover:shadow-md">
                        <span>Mesajı Gönder</span>
                        <span class="material-symbols-outlined text-[20px]">send</span>
                    </button>
                </div>
            </div>
        </form>

    </div>
</div>

@if (TempData["MessageSuccess"] != null || TempData["MessageError"] != null)
{
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            @if (TempData["MessageSuccess"] != null)
            {
                <text>
                Swal.fire({
                    icon: 'success',
                    title: 'Başarılı!',
                    text: '@Html.Raw(TempData["MessageSuccess"])',
                    confirmButtonColor: '#0d93f2',
                    timer: 3000,
                    timerProgressBar: true
                });
                </text>
            }
            @if (TempData["MessageError"] != null)
            {
                <text>
                Swal.fire({
                    icon: 'error',
                    title: 'Hata!',
                    text: '@Html.Raw(TempData["MessageError"])',
                    confirmButtonColor: '#dc2626'
                });
                </text>
            }
        });
    </script>
}
